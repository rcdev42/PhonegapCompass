<!DOCTYPE html>
<html>
	<title>&nbsp;</title>
	<head>
		<style>
			#compass
			{
				position: absolute;
				top: 0px;
				left: 0px;
				z-index: 1;
				max-height: 345px;
			}
			
			#needle
			{
				position: absolute;
				top: 21px;
				left: 28px;
				z-index: 10;
				max-height: 345px;
			}
		</style>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<link  href="jquery.mobile-1.4.5.min.css" rel="stylesheet" />
		<script src="jquery-2.1.3.min.js"></script>
		<script src="jquery.mobile-1.4.5.min.js"></script>

		<script type="text/javascript" charset="utf-8" src="cordova.js"></script>
		
		<!-- script type="text/javascript">
		    if (!navigator.userAgent.toLowerCase().match('chrome'))
		    {
		        document.write("<script src='cordova.js'><\/script>");
		    }
		</script -->
		<!-- script type="text/javascript">
		    // Atrocious way of loading two diffent phonegap scripts, but other loading methods won't work.
		    // also there shouldn't be two scripts to begin with -- so much for cross-platform.
		    var userAgent = navigator.userAgent.toLowerCase();
		    if (userAgent.match(/iphone/))
		    {
			    document.write("<script type='text/javascript' src='cordova-iphone.js'><\/script>");
		  	}
		  	else
		  	{
		    	document.write("<script type='text/javascript' src='cordova-android.js'><\/script>");
			}
		</script -->

	</head>
	<body>
		
		<img id="compass" src="compass.png" />
		<img id="needle" src="needle.png" />

	</body>
	
	<script src="jQueryRotate.js"></script>

	<script>

		document.addEventListener('deviceready', onDeviceReady, false);

		function onDeviceReady()
		{
			startCompass();
		}
		
		function startCompass()
		{
			var options =  { frequency: 50 };
			
			navigator.compass.watchHeading(onSuccess, onError, options);
		}
		
		function onSuccess(heading)
		{
			$('#needle').rotate(-1 * heading.magneticHeading);
		}
		
		function onError(error)
		{
			alert('Error: ' + error);
		}
		
	</script>
	
</html>


















